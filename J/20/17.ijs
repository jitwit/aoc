load '~/code/aoc/aoc.ijs'

W =: '#'&=;._2 aoc 2020 17
P =: 0&, @ ,&0
nhoodA =: (,/^:2(,"0 1/ ,"0/~)i:1) -. 0 0 0
nhoodB =: (,/^:3(,"0 1/^:2 ,"0/~)i:1) -. 0 0 0 0
life =: {{((3=])`(2 3 e.~])@.[ [: +/u|.!.0"1 _/])v y}}

+/ , nhoodA life (P"3@:(P"2)@:(P"1)) ^: 6 ,: W
+/ , nhoodB life (P"4@:(P"3)@:(P"2)@:(P"1)) ^: 6 ,:^:2 W

load '~/code/aoc/aoc.ijs'

W =: '#'&=;._2 aoc 2020 17
Z =: 0&,@,&0
nhood =: _1 + #&3 #: i.@:(3&^)
life =: {{((3=]-[*4=]) [: +/u|.!.0"1 _/]) v y}}
+/ , (nhood 3) life (Z"3@:(Z"2)@:(Z"1)) ^: 6 ,: W
+/ , (nhood 4) life (Z"4@:(Z"3)@:(Z"2)@:(Z"1)) ^: 6 ,:^:2 W

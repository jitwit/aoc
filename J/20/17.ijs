load '~/code/aoc/aoc.ijs'

W =: '#'&=;._2 aoc 2020 17

P0 =: 0&, @ ,&0
PA =: P0"3 @: (P0"2) @: (P0"1)
PB =: P0"4 @: (P0"3) @: (P0"2) @: (P0"1)

nhoodA =: (,/^:2(,"0 1/ ,"0/~)i:1) -. 0 0 0
nhoodB =: (,/^:3(,"0 1/^:2 ,"0/~)i:1) -. 0 0 0 0
life =: {{((3=])`(2 3 e.~])@.[ [: +/u|.!.0"1 _/])v y}}

+/ , nhoodA life PA ^: 6 ,: W
+/ , nhoodB life PB ^: 6 ,:^:2 W

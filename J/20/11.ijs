load '~/code/aoc/aoc.ijs'

in=: 'L'&= ;._2 aoc 2020 11

S =: (*&(=&0)+[*4>]) [: +/ (<:3 3#:(i.9)-.4)|.!.0/ ]
+/ , (in*S) ^: _ in

Z =: [: < 2 <\ (#~ {&in)
G =. (,|."1)>;(Z/.J),(Z/.|.J),Z"1 J,|:J=:{;~i.#in
G =: (([: < {:"1)/.~{."1) (i.~ [: ~. {."1) G
T =: (*&(=&0)+[*5>]) {{ ([: +/ {&y) &> G }}
+/ T^:_ (#G)$0

load '~/code/aoc/aoc.ijs'

in=: '.L#'&i. ;._2 aoc 2020 11
F=: (0=])`(4>])@.[ [: +/ (<:3 3#:(i.9)-.4)|.!.0/ ]
S=: in * 1 + F @: (2&=) f.

+/ , 2 = S ^: _ in

Z=: [: < 2 <\ (#~ {&in)
G=: (([:<{:"1)/.~ {."1)(i.~[:~.{."1)(,|."1)>;(Z/.J),(Z/.|.J),Z"1 J,|:J=:{;~i.#in
V=: {{ ([: +/ {&y) &> G }}
T=: (0=])`(5>])@.[ V
+/ T ^: _ (#G)$0
